<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chi tiết sản phẩm - Cuồng Sạc</title>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@100;300;400;500;600;700&family=Baloo+2:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/Cuongsac/assets/css/styles.css">
    <link rel="stylesheet" href="/Cuongsac/assets/css/product-detail.css">
</head>
<body>
    <!-- Top Bar -->
    <div class="top-bar">
        <div class="container">
            Tư vấn sạc dự phòng, củ sạc<b>: 0356180093</b> • Địa chỉ<b>: 180 Cao Lỗ, Phường 4 - Quận 8 - TPHCM</b>
        </div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="container">
            <!-- Mobile Nav Header -->
            <div class="mobile-nav-header">
                <button class="mobile-menu-toggle" title="Menu" aria-label="Mở menu">
                    <i class="fas fa-bars"></i>
                </button>
                
                <div class="logo mobile-logo">
                    <a href="/Cuongsac/">
                        <img src="/Cuongsac/assets/images/logo.png" alt="Cuồng Sạc Logo">
                    </a>
                </div>
                
                <div class="mobile-actions">
                    <a href="/Cuongsac/pages/login.html">
                        <i class="fas fa-user"></i>
                    </a>
                    <a href="/Cuongsac/pages/cart.html">
                        <i class="fas fa-shopping-cart"></i>
                    </a>
                </div>
            </div>
            
            <!-- Desktop Logo -->
            <div class="logo desktop-logo">
                <a href="/Cuongsac/">
                    <img src="/Cuongsac/assets/images/logo.png" alt="Cuồng Sạc Logo">
                </a>
            </div>
            
            <div class="search-bar">
                <input type="text" placeholder="Tìm kiếm sản phẩm...">
                <button type="submit" title="Tìm kiếm" aria-label="Tìm kiếm">
                    <i class="fas fa-search"></i>
                </button>
            </div>
            
            <div class="actions">
                <a href="/Cuongsac/pages/login.html" class="action-item">
                    <i class="fas fa-user"></i>
                    <span>Đăng nhập</span>
                </a>
                <a href="/Cuongsac/pages/login.html" class="action-item">
                    <i class="fas fa-sign-in-alt"></i>
                    <span>Đăng ký</span>
                </a>
                <a href="/Cuongsac/pages/cart.html" class="action-item">
                    <i class="fas fa-shopping-cart"></i>
                    <span>Giỏ hàng</span>
                </a>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="navigation">
        <div class="container">
            <div class="nav-item dropdown">
                <a href="#" class="nav-link">
                    <i class="fas fa-bars"></i>
                    <span>Danh mục sản phẩm</span>
                    <i class="fas fa-chevron-down"></i>
                </a>
                <ul class="dropdown-menu">
                    <li><a href="/Cuongsac/pages/categories/power-banks">SẠC DỰ PHÒNG</a></li>
                    <li><a href="/Cuongsac/pages/categories/chargers">CỦ SẠC</a></li>
                    <li><a href="/Cuongsac/pages/categories/fast-charging">SẠC NHANH</a></li>
                    <li><a href="/Cuongsac/pages/categories/wireless">SẠC KHÔNG DÂY</a></li>
                    <li><a href="/Cuongsac/pages/categories/laptop-chargers">SẠC CHO LAPTOP</a></li>
                    <li><a href="/Cuongsac/pages/categories/budget">SẠC GIÁ RẺ</a></li>
                    <li><a href="/Cuongsac/pages/categories/combo">COMBO SẠC</a></li>
                    <li><a href="/Cuongsac/pages/categories/accessories">LINH KIỆN SẠC</a></li>
                </ul>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link">
                    <i class="fas fa-shield-alt"></i>
                    <span>Chất lượng đảm bảo</span>
                </a>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link">
                    <i class="fas fa-truck"></i>
                    <span>Vận chuyển siêu tốc</span>
                </a>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link">
                    <i class="fas fa-phone-alt"></i>
                    <span>Tư vấn sản phẩm: 0356180093</span>
                </a>
            </div>
            <div class="nav-item">
                <a href="/Cuongsac/pages/about.html" class="nav-link">
                    <i class="fas fa-info-circle"></i>
                    <span>THÔNG TIN TRANG WEB</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- Product Detail Section -->
    <section class="product-detail-section">
        <div class="container">
            <div class="product-detail-container">
                <!-- Breadcrumb -->
                <div class="breadcrumb">
                    <a href="/Cuongsac/" class="back-button">
                        <i class="fas fa-arrow-left"></i>
                        Trở về
                    </a>
                    <a href="/Cuongsac/">Trang chủ</a>
                    <i class="fas fa-chevron-right"></i>
                    <a href="#" id="product-category"></a>
                    <i class="fas fa-chevron-right"></i>
                    <span id="product-name"></span>
                </div>

                <!-- Product Info -->
                <div class="product-detail-content">
                    <!-- Product Images -->
                    <div class="product-images">
                        <div class="discount-badge-corner">
                            <span class="discount-percent" id="discount-corner"></span>
                        </div>
                        <div class="main-image">
                            <img id="main-product-image" src="" alt="Hình ảnh sản phẩm">
                        </div>
                    </div>

                    <!-- Product Information -->
                    <div class="product-info-detail">
                        <h1 id="product-title"><span class="loading-text">Đang tải...</span></h1>
                        
                        <div class="product-status">
                            <span class="status-label">Tình trạng:</span>
                            <span class="status-value in-stock" id="product-status">Đang kiểm tra...</span>
                        </div>

                        <div class="product-price-detail">
                            <div class="price-row">
                                <div class="price-label">Giá:</div>
                                <div class="price-content">
                                    <div class="current-price" id="product-current-price"></div>
                                    <div class="price-info">
                                        <span class="original-price" id="product-original-price"></span>
                                        <span class="discount-badge" id="product-discount"></span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="product-options">
                            <div class="option-group">
                                <span class="option-label">Thương hiệu:</span>
                                <span class="option-value" id="product-brand"></span>
                            </div>

                            <div class="product-specs">
                                <h3>Thông số kỹ thuật:</h3>
                                <ul id="product-specifications" style="list-style-position: inside; padding-left: 0;">
                                    <li>Dung lượng: <span id="capacity"></span></li>
                                    <li>Công suất sạc: <span id="power"></span></li>
                                    <li>Cổng sạc vào: <span id="input-port"></span></li>
                                    <li>Cổng sạc ra: <span id="output-port"></span></li>
                                    <li>Công nghệ sạc: <span id="charging-tech"></span></li>
                                </ul>
                            </div>

                            <div class="quantity-section">
                                <div class="quantity-selector">
                                    <label for="quantity">Số lượng:</label>
                                    <div class="quantity-controls">
                                        <button class="quantity-btn minus" aria-label="Giảm số lượng">−</button>
                                        <input type="number" value="1" min="1" max="99" id="quantity" aria-label="Số lượng sản phẩm">
                                        <button class="quantity-btn plus" aria-label="Tăng số lượng">+</button>
                                    </div>
                                </div>
                            </div>

                            <div class="product-actions">
                                <button class="add-to-cart-btn product-cart-btn">
                                    <span class="product-cart-icon"><i class="fas fa-shopping-cart"></i></span>
                                    <span class="product-cart-text">THÊM VÀO GIỎ</span>
                                </button>
                                <button class="buy-now-btn">
                                    MUA NGAY
                                </button>
                            </div>

                            <div class="social-share">
                                <span>Chia sẻ:</span>
                                <div class="share-buttons">
                                    <a href="#" class="share-btn facebook"><i class="fab fa-facebook-f"></i></a>
                                    <a href="#" class="share-btn messenger"><i class="fab fa-facebook-messenger"></i></a>
                                    <a href="#" class="share-btn twitter"><i class="fab fa-twitter"></i></a>
                                    <a href="#" class="share-btn pinterest"><i class="fab fa-pinterest-p"></i></a>
                                    <a href="#" class="share-btn copy-link"><i class="fas fa-link"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Product Policies -->
                    <div class="product-policies">
                        <h3>Chính sách bán hàng</h3>
                        <ul class="policy-list">
                            <li>
                                <i class="fas fa-check-circle"></i>
                                <span>Cam kết 100% chính hãng</span>
                            </li>
                            <li>
                                <i class="fas fa-headset"></i>
                                <span>Hỗ trợ 24/7</span>
                            </li>
                            <li>
                                <i class="fas fa-sync"></i>
                                <span>Hoàn tiền 111% nếu hàng giả</span>
                            </li>
                            <li>
                                <i class="fas fa-box-open"></i>
                                <span>Mở hộp kiểm tra nhận hàng</span>
                            </li>
                            <li>
                                <i class="fas fa-exchange-alt"></i>
                                <span>Đổi trả trong 7 ngày</span>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Product Description -->
                <div class="product-description">
                    <h2>Mô tả sản phẩm</h2>
                    <div id="product-description-content">
                        <p class="loading-text">Đang tải thông tin sản phẩm...</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Related Products Section -->
    <section class="related-products-section">
        <div class="container">
            <div class="related-products-container">
                <div class="related-products-header">
                    <h2>Sản phẩm liên quan</h2>
                </div>
                <div class="related-products-grid" id="related-products-container">
                    <!-- Trạng thái loading -->
                    <div class="loading-skeleton">
                        <div class="loading-card"></div>
                        <div class="loading-card"></div>
                        <div class="loading-card"></div>
                        <div class="loading-card"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Newsletter Subscription -->
    <section class="newsletter-section">
        <div class="container">
            <div class="newsletter-content">
                <div class="newsletter-text">
                    <h3>Đăng ký nhận bản tin</h3>
                    <p>Để nhận các thông tin mới từ Cuồng Sạc cũng như các chương trình khuyến mãi</p>
                </div>
                <div class="newsletter-form">
                    <form class="input-group">
                        <input type="email" placeholder="✉ Vui lòng nhập email của bạn...">
                        <button type="submit">ĐĂNG KÝ</button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <div class="footer-dropdown">
                        <h4>Về Cuồng Sạc <i class="fas fa-chevron-down"></i></h4>
                        <div class="dropdown-content">
                            <p>Trang thương mại (không) chính thức của Hội Cuồng Sạc - Sạc Thủ. Luôn tìm kiếm những sản phẩm vì Sạc Thủ.</p>
                            <div class="social-icons">
                                <a href="#"><i class="fab fa-facebook-f"></i></a>
                                <a href="#"><i class="fab fa-twitter"></i></a>
                                <a href="#"><i class="fab fa-instagram"></i></a>
                                <a href="#"><i class="fab fa-google-plus-g"></i></a>
                                <a href="#"><i class="fab fa-youtube"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="footer-column">
                    <div class="footer-dropdown">
                        <h4>Thông tin liên hệ <i class="fas fa-chevron-down"></i></h4>
                        <div class="dropdown-content">
                            <ul>
                                <li><i class="fas fa-map-marker-alt"></i> 180 Cao Lỗ - Phường 4 - Quận 8 - TPHCM</li>
                                <li><i class="fas fa-phone"></i> 0356180093</li>
                                <li><i class="fas fa-envelope"></i> mnhattheacre@gmail.com</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="footer-column">
                    <div class="footer-dropdown">
                        <h4>Tài khoản ngân hàng <i class="fas fa-chevron-down"></i></h4>
                        <div class="dropdown-content">
                            <ul>
                                <li><a href="/Cuongsac/tai-khoan-ngan-hang">Tài khoản ngân hàng</a></li>
                                <li><a href="/Cuongsac/tim-kiem">Tìm kiếm</a></li>
                                <li><a href="/Cuongsac/phuong-thuc-thanh-toan">Phương thức thanh toán</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="footer-column">
                    <div class="footer-dropdown">
                        <h4>Chính sách <i class="fas fa-chevron-down"></i></h4>
                        <div class="dropdown-content">
                            <ul>
                                <li><a href="/Cuongsac/pages/information/privacy-policy.html">Chính sách bảo mật</a></li>
                                <li><a href="/Cuongsac/pages/information/warranty.html">Quy định bảo hành</a></li>
                                <li><a href="/Cuongsac/pages/information/return-policy.html">Chính sách đổi trả</a></li>
                                <li><a href="/Cuongsac/pages/information/terms-of-use.html">Điều khoản sử dụng</a></li>
                                <li><a href="/Cuongsac/pages/information/shipping-policy.html">Chính sách vận chuyển và kiểm hàng</a></li>
                                <li><a href="/Cuongsac/pages/information/logistics-responsibility.html">Phân định trách nhiệm của tổ chức cung ứng dịch vụ logistics</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Student Info Bar -->
    <div class="student-info">
        <div class="container">
            <p>Họ tên: Nguyễn Minh Nhật - MSSV: DH52201153 - Lớp: D22_TH12 - Nhóm: 26 - Ca học: Thứ 2_Ca 4</p>
        </div>
    </div>

    <!-- Cart Popup -->
    <div id="cart-popup" class="cart-popup">
        <div class="cart-popup-content">
            <h2>GIỎ HÀNG</h2>
            <div class="cart-popup-items">
                <p class="empty-cart">Hiện chưa có sản phẩm</p>
            </div>
            <div class="cart-popup-footer">
                <div class="cart-popup-total">
                    <span>TỔNG TIỀN:</span>
                    <span class="total-price">0₫</span>
                </div>
                <a href="/Cuongsac/pages/cart.html" class="view-cart-button">XEM GIỎ HÀNG</a>
            </div>
        </div>
    </div>
    
    <!-- Custom JavaScript -->
    <script src="/Cuongsac/assets/js/script.js"></script>
    <script src="/Cuongsac/assets/js/product-detail.js"></script>
    <script src="/Cuongsac/assets/js/cart.js"></script>
    <script src="/Cuongsac/assets/js/newsletter.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Xử lý thêm vào giỏ hàng từ trang chi tiết sản phẩm
            const addToCartBtn = document.querySelector('.product-cart-btn');
            const quantityInput = document.getElementById('quantity');
            
            if (addToCartBtn) {
                addToCartBtn.addEventListener('click', function() {
                    // Kiểm tra trạng thái còn hàng
                    const statusElement = document.getElementById('product-status');
                    if (statusElement.classList.contains('out-of-stock')) {
                        showToast('Sản phẩm đã hết hàng', 'error');
                        return;
                    }
                    
                    // Lấy thông tin sản phẩm từ trang
                    const productId = new URLSearchParams(window.location.search).get('id') || '0';
                    const productName = document.getElementById('product-title').textContent;
                    const productPrice = parseFloat(document.getElementById('product-current-price').textContent.replace(/\D/g, ''));
                    const productImage = document.getElementById('main-product-image').src;
                    const quantity = parseInt(quantityInput.value) || 1;
                    
                    console.log("Thêm sản phẩm vào giỏ hàng từ trang chi tiết:", {
                        id: productId,
                        name: productName,
                        price: productPrice,
                        image: productImage,
                        quantity: quantity
                    });
                    
                    // Thêm vào giỏ hàng từ localStorage hoặc tạo giỏ hàng mới
                    let cart = JSON.parse(localStorage.getItem('cuongsacCart')) || { items: [], totalPrice: 0 };
                    
                    // Kiểm tra xem sản phẩm đã có trong giỏ hàng chưa
                    const existingItemIndex = cart.items.findIndex(item => item.id === productId);
                    
                    if (existingItemIndex !== -1) {
                        // Nếu sản phẩm đã tồn tại, tăng số lượng
                        cart.items[existingItemIndex].quantity += quantity;
                    } else {
                        // Nếu sản phẩm chưa tồn tại, thêm mới
                        cart.items.push({
                            id: productId,
                            name: productName,
                            price: productPrice,
                            image: productImage,
                            quantity: quantity
                        });
                    }
                    
                    // Cập nhật tổng giá
                    cart.totalPrice = cart.items.reduce((total, item) => total + (item.price * item.quantity), 0);
                    
                    // Lưu giỏ hàng
                    localStorage.setItem('cuongsacCart', JSON.stringify(cart));
                    
                    // Hiển thị thông báo
                    showToast('Đã thêm ' + quantity + ' sản phẩm vào giỏ hàng');
                    
                    // Hiện popup giỏ hàng
                    const cartPopup = document.getElementById('cart-popup');
                    if (cartPopup) {
                        cartPopup.style.display = 'block';
                        setTimeout(() => {
                            cartPopup.style.display = 'none';
                        }, 3000);
                    }
                    
                    // Cập nhật số hiển thị trên icon giỏ hàng
                    const totalItems = cart.items.reduce((total, item) => total + item.quantity, 0);
                    const cartIcons = document.querySelectorAll('.action-item .fa-shopping-cart, .mobile-actions .fa-shopping-cart');
                    
                    cartIcons.forEach(icon => {
                        const parentElement = icon.parentElement;
                        const existingBadge = parentElement.querySelector('.cart-count-badge');
                        if (existingBadge) {
                            existingBadge.remove();
                        }
                        
                        const badge = document.createElement('span');
                        badge.className = 'cart-count-badge';
                        badge.textContent = totalItems;
                        parentElement.appendChild(badge);
                    });
                });
            }
            
            // Xử lý nút tăng giảm số lượng
            const minusBtn = document.querySelector('.quantity-btn.minus');
            const plusBtn = document.querySelector('.quantity-btn.plus');
            
            if (minusBtn) {
                minusBtn.addEventListener('click', function() {
                    let value = parseInt(quantityInput.value);
                    if (value > 1) {
                        quantityInput.value = value - 1;
                    }
                });
            }
            
            if (plusBtn) {
                plusBtn.addEventListener('click', function() {
                    let value = parseInt(quantityInput.value);
                    quantityInput.value = value + 1;
                });
            }
            
            // Tải giỏ hàng hiện tại để hiển thị số lượng
            const savedCart = localStorage.getItem('cuongsacCart');
            if (savedCart) {
                const cart = JSON.parse(savedCart);
                const totalItems = cart.items.reduce((total, item) => total + item.quantity, 0);
                
                if (totalItems > 0) {
                    const cartIcons = document.querySelectorAll('.action-item .fa-shopping-cart, .mobile-actions .fa-shopping-cart');
                    
                    cartIcons.forEach(icon => {
                        const parentElement = icon.parentElement;
                        const existingBadge = parentElement.querySelector('.cart-count-badge');
                        if (existingBadge) {
                            existingBadge.remove();
                        }
                        
                        const badge = document.createElement('span');
                        badge.className = 'cart-count-badge';
                        badge.textContent = totalItems;
                        parentElement.appendChild(badge);
                    });
                }
            }
        });
    </script>
</body>
</html> 